# Платформа предложений

## 📋 Информация о проекте

### Название проекта
**Merchant Platform** - Платформа предложений для корпоративных клиентов онлайн-банка

### 👥 Команда
- **Ержан** - Frontend разработка
- **Гасыр** - Backend разработка
- **Макс** - Backend разработка

### 💼 Краткое описание бизнес задачи

Создание B2B-платформы для размещения коммерческих предложений партнеров в экосистеме онлайн-банка. Платформа позволяет компаниям из Казахстана размещать свои услуги (IT-консалтинг, телекоммуникации, недвижимость, обучение, юридические услуги и т.д.) с возможностью привлечения новых корпоративных клиентов через банковское приложение.

Основные задачи:
- Предоставить витрину услуг для юридических лиц
- Монетизировать трафик банковского приложения через партнерские размещения
- Обеспечить партнерам аналитику и управление размещениями
- Создать систему тарификации с приоритизацией показов

---

## 🏗️ Архитектура

### Краткое описание архитектуры проекта

Платформа построена на микросервисной архитектуре с разделением на frontend (React SPA) и backend (gRPC микросервисы). Frontend взаимодействует с бэкендом через REST API Gateway, который агрегирует запросы к внутренним сервисам (Offers, Partners), использующим отдельные базы данных PostgreSQL. Медиафайлы хранятся в объектном хранилище MinIO, а внутренняя коммуникация между микросервисами осуществляется по протоколу gRPC.

### Основная идея/подход

**Frontend:** Приложение построено на основе **SPA (Single Page Application)** с клиентским роутингом. Используется компонентный подход с разделением на:
- **Презентационные компоненты** (UI-элементы)
- **Страницы** (роутинг и бизнес-логика)
- **Утилиты** (вспомогательные функции)

**Backend:** Микросервисная архитектура с разделением ответственности:
- **API Gateway** - точка входа для клиентских приложений
- **Offers Service** - управление предложениями и каталогом
- **Partners Service** - управление партнерами и тарифами
- **Media Storage** - хранение и обработка изображений


### Главные компоненты системы и взаимодействия

#### Общая архитектура системы

```
┌─────────────────────────────────────────────────────────┐
│                   CLIENT (Browser)                      │
│                  React SPA Application                  │
└────────────────────────┬────────────────────────────────┘
                         │ HTTPS/REST
                         │
┌────────────────────────▼────────────────────────────────┐
│                   API Gateway (REST)                    │
│            - Authentication & Authorization             │
│            - Request Routing & Aggregation              │
│            - Rate Limiting & Caching                    │
└─────────────┬──────────────────────┬────────────────────┘
              │ gRPC                 │ gRPC
              │                      │
    ┌─────────▼──────────┐  ┌────────▼─────────┐
    │  Offers Service    │  │ Partners Service │
    │                    │  │                  │
    │ - CRUD Offers      │  │ - CRUD Partners  │
    │ - Search/Filter    │  │ - Tariff Plans   │
    │ - Categories       │  │ - Analytics      │
    │ - Moderation       │  │ - Subscriptions  │
    └─────────┬──────────┘  └────────┬─────────┘
              │                      │
              │ SQL                  │ SQL
              │                      │
    ┌─────────▼──────────┐  ┌────────▼─────────┐
    │  PostgreSQL DB     │  │ PostgreSQL DB    │
    │   (offers_db)      │  │  (partners_db)   │
    │                    │  │                  │
    │ - offers           │  │ - partners       │
    │ - categories       │  │ - tariffs        │
    │ - promo_codes      │  │ - subscriptions  │
    │ - reviews          │  │ - analytics      │
    └────────────────────┘  └──────────────────┘

    ┌──────────────────────────────────────────┐
    │           MinIO (S3-compatible)          │
    │         Object Storage for Media         │
    │                                          │
    │ - Partner logos                          │
    │ - Product images                         │
    │ - Banner images                          │
    └──────────────────────────────────────────┘
```

#### Frontend компоненты

```
┌─────────────────────────────────────────────────┐
│                   App.jsx                       │
│           (HashRouter, Routes)                  │
└─────────────────┬───────────────────────────────┘
                  │
        ┌─────────┴─────────┐
        │                   │
    ┌───▼────┐         ┌────▼─────────────────┐
    │ Header │         │   Page Components    │
    │        │         │   - Home             │
    │ - Logo │         │   - ProductDetail    │
    │ - Search        │   - BecomePartner    │
    │ - Location      │   - Profile          │
    │ - Navigation    │                      │
    └────────┘         └─────┬────────────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
         ┌────▼────┐   ┌─────▼──────┐  ┌───▼──────┐
         │Category │   │  Products  │  │ Product  │
         │ Slider  │   │ Container  │  │   Card   │
         │         │   │            │  │          │
         │(Swiper) │   │ - Filter   │  │ - Image  │
         └─────────┘   │ - Grid     │  │ - Info   │
                       └────┬───────┘  │ - Favorite│
                            │          └──────────┘
                       ┌────▼────┐
                       │Product  │
                       │  Card   │
                       └─────────┘
```

**Основные потоки данных:**
1. **Поиск**: Header → CustomEvent → Home → ProductsContainer
2. **Избранное**: ProductCard → localStorage → Profile
3. **Роутинг**: Клик на карточку → navigate() → ProductDetail

### Используемые технологии и инструменты

**Frontend:**
- **React 18** - библиотека для UI
- **React Router DOM** (HashRouter) - клиентский роутинг
- **Vite 5** - сборщик и dev-сервер
- **Swiper.js** - карусель категорий
- **Lucide React** - SVG иконки
- **CSS3** - стилизация (модульные стили)
- **LocalStorage API** - хранение избранного и состояния

**Backend (микросервисы):**
- **PostgreSQL** - реляционные базы данных:
  - `offers_db` - каталог предложений, категории, промокоды
  - `partners_db` - данные партнеров, тарифы, подписки, аналитика
- **MinIO** - S3-совместимое объектное хранилище для медиафайлов
- **gRPC** - внутренняя коммуникация между микросервисами
- **REST API** - внешний API через API Gateway для клиентских приложений

**Инфраструктура:**
- **API Gateway** - маршрутизация, аутентификация, rate limiting
- **Docker** - контейнеризация сервисов
- **Kubernetes** - оркестрация контейнеров (production)
- **Redis** - кэширование и очереди задач

**Инструменты разработки:**
- **ESLint** - линтинг кода
- **Git/GitHub** - версионирование
- **GitHub Pages** - хостинг frontend
- **GitHub Actions** - CI/CD автоматизация

**Дизайн:**
- Google Fonts (Manrope)
- Адаптивная верстка (mobile-first)
- Цветовая схема: #10b981 (основной), #ff9500 (акцент)

### Внешние сервисы и API интеграции

**Текущие интеграции (Frontend):**
- **REST API Gateway** - взаимодействие с бэкенд сервисами
- **LocalStorage API** - клиентское хранилище данных
- **Google Fonts API** - загрузка шрифтов
- **GitHub Pages** - хостинг статических файлов

**Backend интеграции:**
- **MinIO** - хранение и получение медиафайлов через S3-compatible API
- **PostgreSQL** - персистентное хранилище данных
- **gRPC** - межсервисное взаимодействие (Offers ↔ Partners)

**Планируемые интеграции:**
- **OAuth 2.0 / JWT** - аутентификация через банковское приложение
- **Платежный шлюз** - интеграция с Kaspi Pay / Halyk Bank для оплаты тарифов
- **Google Analytics / Яндекс.Метрика** - веб-аналитика
- **SendGrid / Mailgun** - email-уведомления о модерации и подписках
- **Twilio / SMS.kz** - SMS-уведомления
- **CRM** - интеграция с AmoCRM / Bitrix24 для управления лидами
- **Elasticsearch** - полнотекстовый поиск по предложениям
- **Prometheus + Grafana** - мониторинг и метрики сервисов

---

## 🚀 Как запустить проект

### Требования
- Node.js 18.x или выше
- npm или yarn

### Быстрый старт

```bash
# 1. Клонировать репозиторий
git clone https://github.com/Yerjvn/merchant-platform.git
cd merchant-platform

# 2. Установить зависимости
npm install

# 3. Запустить dev-сервер
npm run dev

# Приложение доступно на http://localhost:5173
```

### Production сборка и деплой

```bash
# Собрать проект
npm run build

# Деплой на GitHub Pages
npm run deploy
```

### Live Demo
**https://yerjvn.github.io/merchant-platform/**

---

## 📌 Дополнительно

### Что было самым сложным технически

1. **Синхронизация состояния между компонентами**
   - Проблема: Поиск из Header должен влиять на ProductsContainer на другой странице
   - Решение: Custom Events (window.dispatchEvent) для передачи данных между несвязанными компонентами

2. **Адаптация Swiper компонента**
   - Проблема: Стилизация navigation и pagination через глобальные стили
   - Решение: Вынос Swiper стилей в index.css с !important для переопределения

### Что планировали, но не успели реализовать

**Функциональность:**
- Система аутентификации и авторизации
- Модерация новых карточек перед публикацией
- Push-уведомления о новых предложениях
- Личный кабинет для обычных пользователей (не партнеров)
- Мультиязычность (KZ/RU/EN)
- Темная тема интерфейса

**Оплата и монетизация:**
- Интеграция платежного шлюза
- Автоматическое продление подписок
- Реферальная программа

**Аналитика и оптимизация:**
- A/B тестирование размещений
- Рекомендательная система на основе поведения пользователей
- SEO оптимизация (Open Graph, мета-теги)
- Серверный рендеринг (SSR) для лучшей индексации

**UX улучшения:**
- Skeleton loaders при загрузке данных
- Infinite scroll вместо пагинации
- Drag & drop для загрузки изображений
- Предпросмотр карточки перед публикацией
- Онбординг для новых партнеров

---

## 📞 Контакты

**Email:** yerjvn@gmail.com  
**Телефон:** +7 (708) 714-85-68

**GitHub:** https://github.com/Yerjvn/merchant-platform
